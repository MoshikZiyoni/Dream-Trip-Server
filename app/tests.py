# def process_list():

#         my_list = [
#         "London, United Kingdom",
#         "New York City, United States",
#         "Paris, France",
#         "Tokyo, Japan",
#         "Sydney, Australia",
#         "Rome, Italy",
#         "Berlin, Germany",
#         "Moscow, Russia",
#         "Beijing, China",
#         "Toronto, Canada",
#         "Madrid, Spain",
#         "Cairo, Egypt",
#         "Istanbul, Turkey",
#         "Rio de Janeiro, Brazil",
#         "Cape Town, South Africa",
#         "Mumbai, India",
#         "Buenos Aires, Argentina",
#         "Dubai, United Arab Emirates",
#         # "Seoul, South Korea",
#         "Athens, Greece",
#         "Amsterdam, Netherlands",
#         "Prague, Czech Republic",
#         "Vienna, Austria",
#         "Helsinki, Finland",
#         "Bangkok, Thailand",
#         "Singapore, Singapore",
#         "Stockholm, Sweden",
#         "Copenhagen, Denmark",
#         "Budapest, Hungary",
#         "Dublin, Ireland",
#         "Warsaw, Poland",
#         "Lisbon, Portugal",
#         "Oslo, Norway",
#         "Reykjavik, Iceland",
#         "Brasília, Brazil",
#         "Mexico City, Mexico",
#         "Santiago, Chile",
#         "Bogota, Colombia",
#         "Lima, Peru",
#         "Caracas, Venezuela",
#         "Johannesburg, South Africa",
#         "Nairobi, Kenya",
#         "Casablanca, Morocco",
#         "Beirut, Lebanon",
#         "New Delhi, India",
#         "Hanoi, Vietnam",
#         "Manila, Philippines",
#         "Jakarta, Indonesia",
#         "Kuala Lumpur, Malaysia",
#         "Wellington, New Zealand",
#         "San Francisco, United States",
#         "Los Angeles, United States",
#         "Chicago, United States",
#         "Miami, United States",
#         "Boston, United States",
#         "Seattle, United States",
#         "Las Vegas, United States",
#         # "Washington, D.C., United States",
#         "San Diego, United States",
#         "Houston, United States",
#         "Dallas, United States",
#         "Atlanta, United States",
#         "Denver, United States",
#         "Phoenix, United States",
#         "Portland, United States",
#         "Philadelphia, United States",
#         "Vancouver, Canada",
#         "Montreal, Canada",
#         "Calgary, Canada",
#         "Ottawa, Canada",
#         "Edmonton, Canada",
#         "Quebec City, Canada",
#         "Sydney, Canada",
#         "Melbourne, Australia",
#         "Brisbane, Australia",
#         "Perth, Australia",
#         "Adelaide, Australia",
#         "Auckland, New Zealand",
#         "Christchurch, New Zealand",
#         "Wellington, New Zealand",
#         "Mumbai, India",
#         "Delhi, India",
#         "Bangalore, India",
#         "Chennai, India",
#         "Kolkata, India",
#         "Hyderabad, India",
#         "Ahmedabad, India",
#         "Pune, India",
#         "Jaipur, India",
#         "Tokyo, Japan",
#         "Yokohama, Japan",
#         "Osaka, Japan",
#         "Nagoya, Japan",
#         "Sapporo, Japan",
#         "Fukuoka, Japan",
#         "Kyoto, Japan",
#         "Hiroshima, Japan",
#         "Barcelona, Spain",
#         "Valencia, Spain",
#         "Seville, Spain",
#         "Malaga, Spain",
#         "Bilbao, Spain",
#         "Granada, Spain",
#         "Alicante, Spain",
#         "Zaragoza, Spain",
#         "Rome, Italy",
#         "Milan, Italy",
#         "Naples, Italy",
#         "Turin, Italy",
#         "Florence, Italy",
#         "Venice, Italy",
#         "Bologna, Italy",
#         "Genoa, Italy",
#         "Paris, France",
#         "Marseille, France",
#         "Lyon, France",
#         "Toulouse, France",
#         "Nice, France",
#         "Nantes, France",
#         "Strasbourg, France",
#         "Bordeaux, France",
#         "Berlin, Germany",
#         "Hamburg, Germany",
#         "Munich, Germany",
#         "Cologne, Germany",
#         "Frankfurt, Germany",
#         "Stuttgart, Germany",
#         "Düsseldorf, Germany",
#         "Leipzig, Germany",
#         "Vienna, Austria",
#         "Graz, Austria",
#         "Linz, Austria",
#         "Salzburg, Austria",
#         "Innsbruck, Austria",
#         "Klagenfurt, Austria",
#         "Geneva, Switzerland",
#         "Zurich, Switzerland",
#         "Basel, Switzerland",
#         "Lausanne, Switzerland",
#         "Bern, Switzerland",
#         "Lucerne, Switzerland",
#         "St. Gallen, Switzerland",
#         "Moscow, Russia",
#         "Saint Petersburg, Russia",
#         "Novosibirsk, Russia",
#         "Yekaterinburg, Russia",
#         "Nizhny Novgorod, Russia",
#         "Kazan, Russia",
#         "Chelyabinsk, Russia",
#         "Samara, Russia",
#         "Istanbul, Turkey",
#         "Ankara, Turkey",
#         "Izmir, Turkey",
#         "Bursa, Turkey",
#         "Adana, Turkey",
#         "Gaziantep, Turkey",
#         "Konya, Turkey",
#         "Antalya, Turkey",
#         "Beijing, China",
#         "Shanghai, China",
#         "Guangzhou, China",
#         "Shenzhen, China",
#         "Chengdu, China",
#         "Hangzhou, China",
#         "Wuhan, China",
#         "Tianjin, China",
#         "Seoul, South Korea",
#         "Busan, South Korea",
#         "Incheon, South Korea",
#         "Daegu, South Korea",
#         "Daejeon, South Korea",
#         "Gwangju, South Korea",
#         "Ulsan, South Korea",
#         "Athens, Greece",
#         "Thessaloniki, Greece",
#         "Patras, Greece",
#         "Heraklion, Greece",
#         "Larissa, Greece",
#         "Ioannina, Greece",
#         "Volos, Greece",
#         "Amsterdam, Netherlands",
#         "Rotterdam, Netherlands",
#         "The Hague, Netherlands",
#         "Utrecht, Netherlands",
#         "Eindhoven, Netherlands",
#         "Tilburg, Netherlands",
#         "Groningen, Netherlands",
#         "Prague, Czech Republic",
#         "Brno, Czech Republic",
#         "Ostrava, Czech Republic",
#         "Plzen, Czech Republic",
#         "Olomouc, Czech Republic",
#         "Liberec, Czech Republic",
#         "Hradec Kralove, Czech Republic",
#         "Vienna, Austria",
#         "Graz, Austria",
#         "Linz, Austria",
#         "Salzburg, Austria",
#         "Innsbruck, Austria",
#         "Klagenfurt, Austria",
#         "Helsinki, Finland",
#         "Espoo, Finland",
#         "Tampere, Finland",
#         "Vantaa, Finland",
#         "Turku, Finland",
#         "Oulu, Finland",
#         "Lahti, Finland",
#         "Bangkok, Thailand",
#         "Phuket, Thailand",
#         "Chiang Mai, Thailand",
#         "Pattaya, Thailand",
#         "Krabi, Thailand",
#         "Ayutthaya, Thailand",
#         "Samui, Thailand",
#         "Singapore, Singapore",
#         "Stockholm, Sweden",
#         "Gothenburg, Sweden",
#         "Malmo, Sweden",
#         "Uppsala, Sweden",
#         "Vasteras, Sweden",
#         "Orebro, Sweden",
#         "Linkoping, Sweden",
#         "Copenhagen, Denmark",
#         "Aarhus, Denmark",
#         "Odense, Denmark",
#         "Aalborg, Denmark",
#         "Esbjerg, Denmark",
#         "Randers, Denmark",
#         "Kolding, Denmark",
#         "Budapest, Hungary",
#         "Debrecen, Hungary",
#         "Szeged, Hungary",
#         "Miskolc, Hungary",
#         "Pecs, Hungary",
#         "Gyor, Hungary",
#         "Nyiregyhaza, Hungary",
#         "Dublin, Ireland",
#         "Cork, Ireland",
#         "Limerick, Ireland",
#         "Galway, Ireland",
#         "Waterford, Ireland",
#         "Belfast, United Kingdom",
#         "Manchester, United Kingdom",
#         "Birmingham, United Kingdom",
#         "Glasgow, United Kingdom",
#         "Edinburgh, United Kingdom",
#         "Liverpool, United Kingdom",
#         "Leeds, United Kingdom",
#         "Warsaw, Poland",
#         "Krakow, Poland",
#         "Lodz, Poland",
#         "Wroclaw, Poland",
#         "Poznan, Poland",
#         "Gdansk, Poland",
#         "Szczecin, Poland",
#         "Lisbon, Portugal",
#         "Porto, Portugal",
#         "Vila Nova de Gaia, Portugal",
#         "Amadora, Portugal",
#         "Braga, Portugal",
#         "Coimbra, Portugal",
#         "Funchal, Portugal",
#         "Oslo, Norway",
#         "Bergen, Norway",
#         "Stavanger, Norway",
#         "Trondheim, Norway",
#         "Drammen, Norway",
#         "Fredrikstad, Norway",
#         "Sandnes, Norway",
#         "Reykjavik, Iceland",
#         "Brasília, Brazil",
#         "Rio de Janeiro, Brazil",
#         "São Paulo, Brazil",
#         "Salvador, Brazil",
#         "Fortaleza, Brazil",
#         "Belo Horizonte, Brazil",
#         "Manaus, Brazil",
#         "Recife, Brazil",
#         "Mexico City, Mexico",
#         "Guadalajara, Mexico",
#         "Monterrey, Mexico",
#         "Puebla City, Mexico",
#         "Tijuana, Mexico",
#         "Ciudad Juarez, Mexico",
#         "Leon, Mexico",
#         "Santiago, Chile",
#         "Valparaiso, Chile",
#         "Concepcion, Chile",
#         "Antofagasta, Chile",
#         "Vina del Mar, Chile",
#         "Temuco, Chile",
#         "Rancagua, Chile",
#         "Bogota, Colombia",
#         "Medellin, Colombia",
#         "Cali, Colombia",
#         "Barranquilla, Colombia",
#         "Cartagena, Colombia",
#         "Cucuta, Colombia",
#         "Bucaramanga, Colombia",
#         "Lima, Peru",
#         "Arequipa, Peru",
#         "Trujillo, Peru",
#         "Chiclayo, Peru",
#         "Piura, Peru",
#         "Cusco, Peru",
#         "Chimbote, Peru",
#         "Caracas, Venezuela",
#         "Maracaibo, Venezuela",
#         "Valencia, Venezuela",
#         "Barquisimeto, Venezuela",
#         "Maracay, Venezuela",
#         "Ciudad Guayana, Venezuela",
#         "Nairobi, Kenya",
#         "Mombasa, Kenya",
#         "Kisumu, Kenya",
#         "Nakuru, Kenya",
#         "Eldoret, Kenya",
#         "Nyeri, Kenya",
#         "Casablanca, Morocco",
#         "Rabat, Morocco",
#         "Marrakech, Morocco",
#         "Fes, Morocco",
#         "Tangier, Morocco",
#         "Agadir, Morocco",
#         "Beirut, Lebanon",
#         "Tripoli, Lebanon",
#         "Sidon, Lebanon",
#         "Tyre, Lebanon",
#         "Zahle, Lebanon",
#         "New Delhi, India",
#         "Mumbai, India",
#         "Kolkata, India",
#         "Chennai, India",
#         "Bangalore, India",
#         "Hyderabad, India",
#         "Ahmedabad, India",
#         "Pune, India",
#         "Jaipur, India",
#         "Hanoi, Vietnam",
#         "Ho Chi Minh City, Vietnam",
#         "Da Nang, Vietnam",
#         "Haiphong, Vietnam",
#         "Nha Trang, Vietnam",
#         "Can Tho, Vietnam",
#         "Manila, Philippines",
#         "Quezon City, Philippines",
#         "Caloocan, Philippines",
#         "Davao City, Philippines",
#         "Cebu City, Philippines",
#         "Zamboanga City, Philippines",
#         "Jakarta, Indonesia",
#         "Surabaya, Indonesia",
#         "Bandung, Indonesia",
#         "Medan, Indonesia",
#         "Semarang, Indonesia",
#         "Palembang, Indonesia",
#         "Kuala Lumpur, Malaysia",
#         "George Town, Malaysia",
#         "Ipoh, Malaysia",
#         "Shah Alam, Malaysia",
#         "Petaling Jaya, Malaysia",
#         "Malacca City, Malaysia",
#         "Wellington, New Zealand",
#         "Auckland, New Zealand",
#         "Christchurch, New Zealand",
#         "Hamilton, New Zealand",
#         "Tauranga, New Zealand",
#         "Napier, New Zealand",
#         "Dunedin, New Zealand",
#         "San Francisco, United States",
#         "Los Angeles, United States",
#         "Chicago, United States",
#         "Miami, United States",
#         "Boston, United States",
#         "Seattle, United States",
#         "Las Vegas, United States",
#         # "Washington, D.C., United States",
#         "San Diego, United States",
#         "Houston, United States",
#         "Dallas, United States",
#         "Atlanta, United States",
#         "Denver, United States",
#         "Phoenix, United States",
#         "Portland, United States",
#         "Philadelphia, United States",
#         "Vancouver, Canada",
#         "Montreal, Canada",
#         "Calgary, Canada",
#         "Ottawa, Canada",
#         "Edmonton, Canada",
#         "Quebec City, Canada",
#         "Sydney, Canada",
#         "Melbourne, Australia",
#         "Brisbane, Australia",
#         "Perth, Australia",
#         "Adelaide, Australia",
#         "Auckland, New Zealand",
#         "Christchurch, New Zealand",
#         "Wellington, New Zealand",
#         "Christchurch, New Zealand"
#             ]
#         geolocator = Nominatim(user_agent="dream-trip")

#         for item in my_list:
#             city, country = item.split(", ")
#             # print(city)
#             existing_country = Country.objects.filter(name=country).first()
            
#             existing_city = City.objects.filter(name=city)
            
#             if existing_city:
#                 print ('continue')
#                 continue
#             else:

#                 country_id=existing_country.id
#                 wiki=process_query(city)
#                 location = geolocator.geocode(f"{city},{country}")
#                 landmarks = [location.latitude, location.longitude]
#                 city_query = City(country_id=country_id, city=city, latitude=landmarks[0], longitude=landmarks[1], description=wiki[0])
#                 city_query.save()
#                 print ('save successufly')
    
#         print(city,country)
#     thread = Thread(target=process_list)
#     thread.start()
#     exit
#     exit

from dotenv import load_dotenv

from trip_advisor import flickr_api

load_dotenv()


import os
import requests
import json
import time
from geopy.geocoders import Nominatim
from urllib.parse import quote

# def trip_advisor_attraction(city_name,country,landmarks):
#     geolocator = Nominatim(user_agent="dream-trip")
#     key=os.environ.get('TRIP_ADVISOR_KEY')
#     print ('start trip adviosr attractions')
#     url = f"https://api.content.tripadvisor.com/api/v1/location/nearby_search?"
#     headers = {"accept": "application/json"}
#     params = {
#         'searchQuery': f"{city_name},{country}",
#         'latLong': quote(f"{landmarks[0]}, {landmarks[1]}"),  # URL-encode the latLong values
#         'key' : {key},
#         'category': 'attractions',
#         'radius': '10',
#         'radiusUnit':'km',
#         'language' : 'en'
#     }
#     response = requests.get(url, headers=headers, params=params)
#     print(response)
#     result = response.json()
#     attractions = []
#     for attraction in result['data']:
#         address_string = attraction['address_obj']['address_string']
#         address_obj = attraction['address_obj']
#         if 'street1' in address_obj and 'city' in address_obj and 'country' in address_obj:
#             street = address_obj['street1']
#             city_for_attraction = address_obj['city']
#             country = address_obj['country']
#             address_string1 = f"{street}, {city_for_attraction}, {country}"
#             location = geolocator.geocode(address_string1)
#             time.sleep(0.5)
#             latitude = None
#             longitude = None
#             if location is not None:
#                 latitude = location.latitude
#                 longitude = location.longitude
#                 print('Found landmarks for', latitude, longitude)

#             attraction_info = {
#                 'location_ID' : attraction['location_id'],
#                 'name': attraction['name'],
#                 'latitude': latitude,
#                 'longitude': longitude,
#                 'address_string':address_string,
#             }
#             print ('attraction_info save successfuly')
#             attractions.append(attraction_info) 
#     print(attractions)
#     return (attractions)

# trip_advisor_attraction('Asuncion','Paraguay',[25.2637,57.5759])


data={'html_attributions': [], 'next_page_token': 'AUacShgsavWSmjwCqqO7tFTsKeuIvfcfBVIIuSGtz7gLYRXbmFLVhn09P-vJ18VHhjONzbOBRZj2G9kq15GKFc7PkZqfkrhhq5gNp0l5mhCYxcjhxGgqH0b5AU3f5hfESWVhG49TEDo1mBbmyNYKWHpfz429nzKr7Bd4W6lApCuKHjJLpJyFHFrmGPa5e0mKoAibHTx85HE1BkHcwJ8s_jWbFlwLS-PFQtZx6mdHXb23ZPZzmigRPY71V2MOkWMKl8MRg8UymER6vH3s37HbITWQPMg2fKq0Cyw81AGcUApINF-3pTFCt6BadAZjur8EaJ9ock7Z-mHxEnUtqmOdnt_nTN8dmtWTes9gfdW_vKdP5qYnumIhVVB_iXKcOv-LIjbi1L0sWIAK5w9QQy_le5oZjjheTRQ2bKe2cmmC5RtAfqN-zorB5iSdlgNJtRx-2cgZ-2CN70d2yVxB_iyZqmtZRvCxfcHNS-tQ', 'results': [{'business_status': 'OPERATIONAL', 'formatted_address': 'Av. 8 Nte. #10-18, Granada, Cali, Valle del Cauca', 'geometry': {'location': {'lat': 3.4559577, 'lng': -76.5358581}, 'viewport': {'northeast': {'lat': 3.457278629892722, 'lng': -76.53464452010728}, 'southwest': {'lat': 3.454578970107277, 'lng': -76.53734417989273}}}, 'icon': 'https://maps.gstatic.com/mapfiles/place_api/icons/v1/png_71/restaurant-71.png', 'icon_background_color': '#FF9E67', 'icon_mask_base_uri': 'https://maps.gstatic.com/mapfiles/place_api/icons/v2/restaurant_pinlet', 'name': 'The Market Cali', 'opening_hours': {'open_now': True}, 'photos': [{'height': 3024, 'html_attributions': ['<a href="https://maps.google.com/maps/contrib/105995468997962769317">Germán Valencia Gärtner</a>'], 'photo_reference': 'AUacShj_-Jlso58Fvl3WXdUNjqYpEHeXmXFrvJNJNYNfNEKs5bPAfH5ZzIBZv-WvyLsYZaVkP9AL15pOi9CS5iOg7gANLUyCwAzguUtmrqrmDcU9kiMgvS2aqxmiyWnDkbHBEJpW_8M5Xz56LVPzx8uaOj7WbWQ1AIpbfJa_q79T1cAIlqI', 'width': 4032}], 'place_id': 'ChIJORoVNW6mMI4RU6L6cj0ISHc', 'plus_code': {'compound_code': 'FF47+9M Cali, Valle del Cauca', 'global_code': '67M5FF47+9M'}, 'rating': 4.6, 'reference': 'ChIJORoVNW6mMI4RU6L6cj0ISHc', 'types': ['restaurant', 'food', 'point_of_interest', 'establishment'], 'user_ratings_total': 611}, {'business_status': 'OPERATIONAL', 'formatted_address': 'Cl. 4 #3432, El Sindicato, Cali, Valle del Cauca', 'geometry': {'location': {'lat': 3.4346179, 'lng': -76.5449933}, 'viewport': {'northeast': {'lat': 3.435935029892722, 'lng': -76.54361572010728}, 'southwest': {'lat': 3.433235370107278, 'lng': -76.54631537989272}}}, 'icon': 'https://maps.gstatic.com/mapfiles/place_api/icons/v1/png_71/restaurant-71.png', 'icon_background_color': '#FF9E67', 'icon_mask_base_uri': 'https://maps.gstatic.com/mapfiles/place_api/icons/v2/restaurant_pinlet', 'name': 'La Comitiva', 'opening_hours': {'open_now': False}, 'photos': [{'height': 6936, 'html_attributions': ['<a href="https://maps.google.com/maps/contrib/104555655491493566406">Miguel Angel Hurtado Villamil</a>'], 'photo_reference': 'AUacShgBrI_FHbU2X-d8nO9-iIvpiODVbp6UlLri6kR_Vn4upDPd4PeIkxpsqZYOoRq6m-FQDvN-de-rXctpgPSk0EYjk0M0ywcemDTl6vKBBuk9vx3DmMpOpqDoGOBP8aoVHEzpQuwUAVPmIUiMmnDJYmsTcK8fFd9qRn9ZpWSawqN5aWFZ', 'width': 9248}], 'place_id': 'ChIJJSW8MIOmMI4Rtvn2QSI02is', 'plus_code': {'compound_code': 'CFM4+R2 Cali, Valle del Cauca', 'global_code': '67M5CFM4+R2'}, 'price_level': 3, 'rating': 4.7, 'reference': 'ChIJJSW8MIOmMI4Rtvn2QSI02is', 'types': ['restaurant', 'food', 'point_of_interest', 'establishment'], 'user_ratings_total': 2025}, {'business_status': 'OPERATIONAL', 'formatted_address': 'Av. 9 Nte. #14-46, Granada, Cali, Valle del Cauca', 'geometry': {'location': {'lat': 3.4590298, 'lng': -76.53441049999999}, 'viewport': {'northeast': {'lat': 3.460749929892722, 'lng': -76.53313542010729}, 'southwest': {'lat': 3.458050270107278, 'lng': -76.53583507989272}}}, 'icon': 'https://maps.gstatic.com/mapfiles/place_api/icons/v1/png_71/restaurant-71.png', 'icon_background_color': '#FF9E67', 'icon_mask_base_uri': 'https://maps.gstatic.com/mapfiles/place_api/icons/v2/restaurant_pinlet', 'name': "Storia D'Amore Granada", 'opening_hours': {'open_now': False}, 'photos': [{'height': 1280, 'html_attributions': ['<a href="https://maps.google.com/maps/contrib/116137111862940741802">A Google User</a>'], 'photo_reference': 'AUacShjZNLXqHg6oLezFbep_k0ud7dXO-1uJC3uLMfffu_iACdyK54Ro0nOKbGAJ52TBtlS46E9HHElvcSCHBtB-sMx5Kyh1VQANJfJkDao0D1r-QP_P1vZy0ounQsWCXZlx9pe95B_qcKOJp_rqyuOaD3P6B9w6cnz8CmWw8ysTJTyW_PFl', 'width': 1920}], 'place_id': 'ChIJd77fzG2mMI4RAM7aPdf64kM', 'plus_code': {'compound_code': 'FF58+J6 Cali, Valle del Cauca', 'global_code': '67M5FF58+J6'}, 'price_level': 3, 'rating': 4.7, 'reference': 'ChIJd77fzG2mMI4RAM7aPdf64kM', 'types': ['restaurant', 'food', 'point_of_interest', 'establishment'], 'user_ratings_total': 6444}, {'business_status': 'OPERATIONAL', 'formatted_address': 'Cra. 6 # 1-11, COMUNA 3, Cali, Valle del Cauca', 'geometry': {'location': {'lat': 3.4473358, 'lng': -76.5401801}, 'viewport': {'northeast': {'lat': 3.448660429892722, 'lng': -76.53882452010727}, 'southwest': {'lat': 3.445960770107277, 'lng': -76.54152417989272}}}, 'icon': 'https://maps.gstatic.com/mapfiles/place_api/icons/v1/png_71/restaurant-71.png', 'icon_background_color': '#FF9E67', 'icon_mask_base_uri': 'https://maps.gstatic.com/mapfiles/place_api/icons/v2/restaurant_pinlet', 'name': 'Zumaia', 'opening_hours': {'open_now': False}, 'photos': [{'height': 3840, 'html_attributions': ['<a href="https://maps.google.com/maps/contrib/111011503254443116694">A Google User</a>'], 'photo_reference': 'AUacShh7vMH77k-WUsq7_gx2sDb7teNF1FlLnrP3SQCBq2AaTyeydjUjbobO_XPaR8b89v_rODKHvnYPrbCnOMlSFOHiRI1LZJiEoVm7FHY9uv5Kbt56CCkgG_rsAvnH8I51-V0K0d1HBdkqsheEZFyP9jO-DeqIFXMecGVm3K7zikiRvwoZ', 'width': 5760}], 'place_id': 'ChIJX-Xz9HymMI4RUJwkZv5KnSY', 'plus_code': {'compound_code': 'CFW5+WW Cali, Valle del Cauca', 'global_code': '67M5CFW5+WW'}, 'price_level': 3, 'rating': 4.6, 'reference': 'ChIJX-Xz9HymMI4RUJwkZv5KnSY', 'types': ['restaurant', 'food', 'point_of_interest', 'establishment'], 'user_ratings_total': 648}, {'business_status': 'OPERATIONAL', 'formatted_address': 'Cl. 4 #9-23, COMUNA 3, Cali, Valle del Cauca', 'geometry': {'location': {'lat': 3.4467645, 'lng': -76.53777889999999}, 'viewport': {'northeast': {'lat': 3.448111579892723, 'lng': -76.53643952010727}, 'southwest': {'lat': 3.445411920107278, 'lng': -76.53913917989271}}}, 'icon': 'https://maps.gstatic.com/mapfiles/place_api/icons/v1/png_71/restaurant-71.png', 'icon_background_color': '#FF9E67', 'icon_mask_base_uri': 'https://maps.gstatic.com/mapfiles/place_api/icons/v2/restaurant_pinlet', 'name': 'Waunana Restaurante', 'opening_hours': {'open_now': False}, 'photos': [{'height': 3000, 'html_attributions': ['<a href="https://maps.google.com/maps/contrib/116692182597175572016">cdedios92</a>'], 'photo_reference': 'AUacShjjg3jACl7SUzxQm5O2wiYo2U7w-ktk7Gg7nV0BCYfeiMn-feIPqJMp5wx3JdEaCGnAncVX7Y5uDAmfHQY9TLR0U4YXtC5H6PL-HgIplYvFIdWRHgzkpPJ4jV6fR5z8nPeZysU41sDB3dQP6qQCfKmAb0Wvhk8vA-EOOX2BnUeEpnjc', 'width': 4000}], 'place_id': 'ChIJPZorznymMI4R_qDRSzXOI8I', 'plus_code': {'compound_code': 'CFW6+PV Cali, Valle del Cauca', 'global_code': '67M5CFW6+PV'}, 'rating': 4.8, 'reference': 'ChIJPZorznymMI4R_qDRSzXOI8I', 'types': ['restaurant', 'food', 'point_of_interest', 'establishment'], 'user_ratings_total': 392}, {'business_status': 'OPERATIONAL', 'formatted_address': 'Cra. 10 #1-39, COMUNA 3, Cali, Valle del Cauca', 'geometry': {'location': {'lat': 3.4466262, 'lng': -76.5400621}, 'viewport': {'northeast': {'lat': 3.447936729892722, 'lng': -76.53871647010727}, 'southwest': {'lat': 3.445237070107277, 'lng': -76.54141612989272}}}, 'icon': 'https://maps.gstatic.com/mapfiles/place_api/icons/v1/png_71/restaurant-71.png', 'icon_background_color': '#FF9E67', 'icon_mask_base_uri': 'https://maps.gstatic.com/mapfiles/place_api/icons/v2/restaurant_pinlet', 'name': 'Antigua Contemporanea', 'opening_hours': {'open_now': False}, 'photos': [{'height': 3000, 'html_attributions': ['<a href="https://maps.google.com/maps/contrib/115460444230707765102">Manu C.</a>'], 'photo_reference': 'AUacShicpcuAYkeQAyPwHxxJ0M1fh-Pb1MIAdInfjSWMI1_SHOUYaXpxv4jVqamR4mSWkn2kjI64lDP6PhnHxv6nwAmV1NgF_k18K86eN-UwT-6d1TS0fI9rK1OB4EEdeYsLwvapzi3cy644dvc49y3gYW8jyJ4l-2tHIzkjQgUHKuN7VZz1', 'width': 4000}], 'place_id': 'ChIJgfgz-XymMI4RlO-ofSrwptQ', 'plus_code': {'compound_code': 'CFW5+JX Cali, Valle del Cauca', 'global_code': '67M5CFW5+JX'}, 'price_level': 3, 'rating': 4.7, 'reference': 'ChIJgfgz-XymMI4RlO-ofSrwptQ', 'types': ['restaurant', 'food', 'point_of_interest', 'establishment'], 'user_ratings_total': 1816}, {'business_status': 'OPERATIONAL', 'formatted_address': 'Av. 3 Nte. #7-19, Granada, Cali, Valle del Cauca', 'geometry': {'location': {'lat': 3.4536148, 'lng': -76.5371832}, 'viewport': {'northeast': {'lat': 3.454918929892723, 'lng': -76.53581257010728}, 'southwest': {'lat': 3.452219270107278, 'lng': -76.53851222989272}}}, 'icon': 'https://maps.gstatic.com/mapfiles/place_api/icons/v1/png_71/restaurant-71.png', 'icon_background_color': '#FF9E67', 'icon_mask_base_uri': 'https://maps.gstatic.com/mapfiles/place_api/icons/v2/restaurant_pinlet', 'name': 'Platillos Voladores', 'opening_hours': {'open_now': False}, 'photos': [{'height': 2268, 'html_attributions': ['<a href="https://maps.google.com/maps/contrib/116387328712132024712">Ricardo Cocoma</a>'], 'photo_reference': 'AUacShhuBngKfLxZ4IIpojRsZELaQ2LHtNyAweMa_CYVMuytt8TTRfpwUxxOL9E7jXcSpaioxc9kt3rIJaNqluRohSZudysg1IwKXh5co2InNaTe9fKfbtl43prUbfy75QTqZUAmc0yix187Y7DwTcrMAk0r4V1c1nfszKWiWr3ayEVhOXGS', 'width': 4032}], 'place_id': 'ChIJLR-42m2mMI4RWDa9u_w4SQE', 'plus_code': {'compound_code': 'FF37+F4 Cali, Valle del Cauca', 'global_code': '67M5FF37+F4'}, 'price_level': 3, 'rating': 4.7, 'reference': 'ChIJLR-42m2mMI4RWDa9u_w4SQE', 'types': ['restaurant', 'food', 'point_of_interest', 'establishment'], 'user_ratings_total': 2948}, {'business_status': 'OPERATIONAL', 'formatted_address': 'Av. 6 D 36N-18, Cali Hotel Spiwak, Chipichape, Cali, Valle del Cauca', 'geometry': {'location': {'lat': 3.4760191, 'lng': -76.5300978}, 'viewport': {'northeast': {'lat': 3.477413779892723, 'lng': -76.52864747010727}, 'southwest': {'lat': 3.474714120107278, 'lng': -76.53134712989271}}}, 'icon': 'https://maps.gstatic.com/mapfiles/place_api/icons/v1/png_71/restaurant-71.png', 'icon_background_color': '#FF9E67', 'icon_mask_base_uri': 'https://maps.gstatic.com/mapfiles/place_api/icons/v2/restaurant_pinlet', 'name': 'Restaurante la Zarzuela', 'opening_hours': {'open_now': True}, 'photos': [{'height': 1000, 'html_attributions': ['<a href="https://maps.google.com/maps/contrib/104101390202222027967">Restaurante la Zarzuela</a>'], 'photo_reference': 'AUacShgbnCmLeTFOrrbW3GvlWW9TAIkk8NrarXqtX0B9FxSdpfM3gPf2-qzKZ0hRYxqQVfv7Iy_bAYussHpsGUWkBsHgkQN0WdQh69J6YhyiDbk6i7X11MBK4nEyckdc3RLpQ0KuFpdguYxVir5nGVKJLwUHAp0apNOSbrE3YPk-lczt8bdt', 'width': 1500}], 'place_id': 'ChIJZRhYGRmmMI4R4xOcstZRewc', 'plus_code': {'compound_code': 'FFG9+CX Cali, Valle del Cauca', 'global_code': '67M5FFG9+CX'}, 'price_level': 2, 'rating': 4.4, 'reference': 'ChIJZRhYGRmmMI4R4xOcstZRewc', 'types': ['restaurant', 'food', 'point_of_interest', 'establishment'], 'user_ratings_total': 157}, {'business_status': 'OPERATIONAL', 'formatted_address': 'Av. 2 Nte. #7-09, Granada, Cali, Valle del Cauca', 'geometry': {'location': {'lat': 3.453217, 'lng': -76.5371001}, 'viewport': {'northeast': {'lat': 3.454487379892722, 'lng': -76.53571967010728}, 'southwest': {'lat': 3.451787720107278, 'lng': -76.53841932989272}}}, 'icon': 'https://maps.gstatic.com/mapfiles/place_api/icons/v1/png_71/restaurant-71.png', 'icon_background_color': '#FF9E67', 'icon_mask_base_uri': 'https://maps.gstatic.com/mapfiles/place_api/icons/v2/restaurant_pinlet', 'name': 'La Gente Que Me Gusta', 'opening_hours': {'open_now': False}, 'photos': [{'height': 450, 'html_attributions': ['<a href="https://maps.google.com/maps/contrib/111478795943790426273">A Google User</a>'], 'photo_reference': 'AUacShiBJ2Sa_6ug3oie4Ge7zdIAnBV3KKN-epHUAmue7EbkXDYZw8ccThx1I6_-pkujwd9hFSPoo_D5RQgfHfz27NER9amcdr3cWN-xpOPKszkR2XI0lXHsGZ0LO3mSoDIEbUbTkt6w9dqPlVGU0khrDJjXS5lT32yF7xFZxumi9tVs8M24', 'width': 450}], 'place_id': 'ChIJ8TqFV2WmMI4RlLOPiz777c4', 'plus_code': {'compound_code': 'FF37+75 Cali, Valle del Cauca', 'global_code': '67M5FF37+75'}, 'price_level': 3, 'rating': 4.5, 'reference': 'ChIJ8TqFV2WmMI4RlLOPiz777c4', 'types': ['restaurant', 'food', 'point_of_interest', 'establishment'], 'user_ratings_total': 1154}, {'business_status': 'OPERATIONAL', 'formatted_address': 'Cl. 3a Oe. #3-07, Barrio Peñon, Cali, Valle del Cauca', 'geometry': {'location': {'lat': 3.4492943, 'lng': -76.54294019999999}, 'viewport': {'northeast': {'lat': 3.450697579892723, 'lng': -76.54158317010727}, 'southwest': {'lat': 3.447997920107278, 'lng': -76.54428282989271}}}, 'icon': 'https://maps.gstatic.com/mapfiles/place_api/icons/v1/png_71/restaurant-71.png', 'icon_background_color': '#FF9E67', 'icon_mask_base_uri': 'https://maps.gstatic.com/mapfiles/place_api/icons/v2/restaurant_pinlet', 'name': 'Casa Ibérica cali', 'opening_hours': {'open_now': False}, 'photos': [{'height': 3000, 'html_attributions': ['<a href="https://maps.google.com/maps/contrib/103463488773393345168">A Google User</a>'], 'photo_reference': 'AUacShidSfMFQl56-BTmNBp7sPA6idUxF5nUmF5mQWcOhp9EHvtt6fk5Yc2rovMDMC63_mqGtjxBmQGGhFkca14-PgypIX5KVsHPu7iDPyH8w6FxNvJukBwbcQus8Eke6vq4wvnRLlvTrlbWv_PwGLM2tukTSGsuRImdBq5byBs8xoH9xVbc', 'width': 4000}], 'place_id': 'ChIJqY0RXc2nMI4RdDozNtPWTk8', 'plus_code': {'compound_code': 'CFX4+PR Cali, Valle del Cauca', 'global_code': '67M5CFX4+PR'}, 'rating': 4.8, 'reference': 'ChIJqY0RXc2nMI4RdDozNtPWTk8', 'types': ['restaurant', 'food', 'point_of_interest', 'establishment'], 'user_ratings_total': 675}, {'business_status': 'OPERATIONAL', 'formatted_address': 'Av. 4 Oe. #5-31, Normandia Sebastian de Belalcazar, Cali, Valle del Cauca', 'geometry': {'location': {'lat': 3.4519058, 'lng': -76.5457035}, 'viewport': {'northeast': {'lat': 3.453311429892722, 'lng': -76.54430077010727}, 'southwest': {'lat': 3.450611770107277, 'lng': -76.54700042989272}}}, 'icon': 'https://maps.gstatic.com/mapfiles/place_api/icons/v1/png_71/restaurant-71.png', 'icon_background_color': '#FF9E67', 'icon_mask_base_uri': 'https://maps.gstatic.com/mapfiles/place_api/icons/v2/restaurant_pinlet', 'name': 'Gastroteca', 'opening_hours': {'open_now': False}, 'photos': [{'height': 772, 'html_attributions': ['<a href="https://maps.google.com/maps/contrib/103886885085602318661">Gastroteca</a>'], 'photo_reference': 'AUacShjV1_YX9SqBJ7-w3sXi7HP8fZ6AfLTUVril1dJrdopEQRTFKha2qNzrAW4NZcZt1vX7h2qlHkQmF2QLBWJ0Iqe8EWX2SBT6Zw4V7tz53ahVemAQC1svE2xMj3W8zZeSxTuJ8-56iTH3gFQUVuqjngnXZzOvn3ED4wP7lDP1Rdsa2I23', 'width': 1242}], 'place_id': 'ChIJD0kcsnmmMI4Rbt8g940epgo', 'plus_code': {'compound_code': 'FF23+QP Cali, Valle del Cauca', 'global_code': '67M5FF23+QP'}, 'price_level': 3, 'rating': 4.6, 'reference': 'ChIJD0kcsnmmMI4Rbt8g940epgo', 'types': ['bar', 'restaurant', 'food', 'point_of_interest', 'establishment'], 'user_ratings_total': 1288}, {'business_status': 'OPERATIONAL', 'formatted_address': 'Cl. 15a Nte. #9N-31, Granada, Cali, Valle del Cauca', 'geometry': {'location': {'lat': 3.4598942, 'lng': -76.5341983}, 'viewport': {'northeast': {'lat': 3.461270129892722, 'lng': -76.53282952010728}, 'southwest': {'lat': 3.458570470107277, 'lng': -76.53552917989273}}}, 'icon': 'https://maps.gstatic.com/mapfiles/place_api/icons/v1/png_71/restaurant-71.png', 'icon_background_color': '#FF9E67', 'icon_mask_base_uri': 'https://maps.gstatic.com/mapfiles/place_api/icons/v2/restaurant_pinlet', 'name': 'Restaurante Ringlete', 'opening_hours': {'open_now': False}, 'photos': [{'height': 3024, 'html_attributions': ['<a href="https://maps.google.com/maps/contrib/111429984855936875512">Nohra Luz Levy</a>'], 'photo_reference': 'AUacShjk5lDjpsA5Gedlgtqo_Zhq81VhCz8Tp5yoHnwGKk8H9jMsI5SDXVOjdS1SGmiAm0vV_r4SI02uJYE7iFXv93nDAQdN7Sve0fw_OV0cBSgIEPFEVX3ek8OK30JvCg65S6zPKn4VfHQJl_WhdBy-4zaDQuoAYq5DXNhF6dwJGI2XlX0k', 'width': 4032}], 'place_id': 'ChIJLaisTGymMI4RBkiy6WJ1cQM', 'plus_code': {'compound_code': 'FF58+W8 Cali, Valle del Cauca', 'global_code': '67M5FF58+W8'}, 'price_level': 2, 'rating': 4.7, 'reference': 'ChIJLaisTGymMI4RBkiy6WJ1cQM', 'types': ['restaurant', 'food', 'point_of_interest', 'establishment'], 'user_ratings_total': 1676}, {'business_status': 'OPERATIONAL', 'formatted_address': 'Cl. 14 Nte. #9-04, Granada, Cali, Valle del Cauca', 'geometry': {'location': {'lat': 3.4588085, 'lng': -76.5347323}, 'viewport': {'northeast': {'lat': 3.460134129892722, 'lng': -76.53340127010726}, 'southwest': {'lat': 3.457434470107278, 'lng': -76.53610092989271}}}, 'icon': 'https://maps.gstatic.com/mapfiles/place_api/icons/v1/png_71/restaurant-71.png', 'icon_background_color': '#FF9E67', 'icon_mask_base_uri': 'https://maps.gstatic.com/mapfiles/place_api/icons/v2/restaurant_pinlet', 'name': 'Hooters Cali', 'opening_hours': {'open_now': False}, 'photos': [{'height': 3024, 'html_attributions': ['<a href="https://maps.google.com/maps/contrib/110014087865246619992">Manny Muniz</a>'], 'photo_reference': 'AUacShhJ1BmV5wsjXZq0kyS1LvuPL6O8T85EiP90Yw6kt6an-_bpHnEKeLg_5pF5gTBYdgM6ZrcG2dHTjJ4WTVqd6yifunYuoapEpFXpbd8GbvG3wt7cYRu2Vwq1wRx3_T2VvaB0U5z3WoDq_Me6QjKRRdXxl8uWjV6p8FqVqPyGWjOf8-2L', 'width': 4032}], 'place_id': 'ChIJhYsk0W2mMI4RsK1bJyMcF4Q', 'plus_code': {'compound_code': 'FF58+G4 Cali, Valle del Cauca', 'global_code': '67M5FF58+G4'}, 'price_level': 2, 'rating': 4.4, 'reference': 'ChIJhYsk0W2mMI4RsK1bJyMcF4Q', 'types': ['meal_delivery', 'bar', 'restaurant', 'food', 'point_of_interest', 'establishment'], 'user_ratings_total': 1909}, {'business_status': 'OPERATIONAL', 'formatted_address': 'Cra. 3 #2-09, COMUNA 3, Cali, Valle del Cauca', 'geometry': {'location': {'lat': 3.4494245, 'lng': -76.5403966}, 'viewport': {'northeast': {'lat': 3.450762779892723, 'lng': -76.53905572010727}, 'southwest': {'lat': 3.448063120107278, 'lng': -76.54175537989272}}}, 'icon': 'https://maps.gstatic.com/mapfiles/place_api/icons/v1/png_71/restaurant-71.png', 'icon_background_color': '#FF9E67', 'icon_mask_base_uri': 'https://maps.gstatic.com/mapfiles/place_api/icons/v2/restaurant_pinlet', 'name': 'Restaurante Rayuela', 'opening_hours': {'open_now': False}, 'photos': [{'height': 768, 'html_attributions': ['<a href="https://maps.google.com/maps/contrib/112340836226009964909">A Google User</a>'], 'photo_reference': 'AUacShg1y6eXMwS42HjFLru0TJEPHa3Pi2sRo1VffCndfnvkrzscG5DmfvDmyA16Zu2-D6eLq5Bh2Hbu-EF_7jOXnF3IYI1IRjDU3WJOSlG7_ErF4Ujt96mRJyiDgn0J-Epnwe6BQzMt9efKcMowm9sh_jmn2OKCN4D819B33Vv882Zmwapz', 'width': 1024}], 'place_id': 'ChIJWykRBRmmMI4RmHXQRubUvos', 'plus_code': {'compound_code': 'CFX5+QR Cali, Valle del Cauca', 'global_code': '67M5CFX5+QR'}, 'price_level': 2, 'rating': 4.7, 'reference': 'ChIJWykRBRmmMI4RmHXQRubUvos', 'types': ['bar', 'restaurant', 'food', 'point_of_interest', 'establishment'], 'user_ratings_total': 778}, {'business_status': 'OPERATIONAL', 'formatted_address': 'Cra. 6 #2 - 130, COMUNA 3, Cali, Valle del Cauca', 'geometry': {'location': {'lat': 3.4475597, 'lng': -76.5389222}, 'viewport': {'northeast': {'lat': 3.448942829892723, 'lng': -76.53758012010728}, 'southwest': {'lat': 3.446243170107278, 'lng': -76.54027977989273}}}, 'icon': 'https://maps.gstatic.com/mapfiles/place_api/icons/v1/png_71/restaurant-71.png', 'icon_background_color': '#FF9E67', 'icon_mask_base_uri': 'https://maps.gstatic.com/mapfiles/place_api/icons/v2/restaurant_pinlet', 'name': 'Trilogía', 'opening_hours': {'open_now': False}, 'photos': [{'height': 3024, 'html_attributions': ['<a href="https://maps.google.com/maps/contrib/112973675381839121487">Cristiam Rivero Salazar</a>'], 'photo_reference': 'AUacShiF23qwgvRSWCaNyqEoymZF2gU7PGHxwEuQvizeCx2y3cD2sOB-1tjI4rMCpo_R-RF0seW78bs53ww6f-tIBq4GRduM2My4v9jLAGKiukm1qi8sqWj8dV8XqK2sOoIuT6lub56nfrme4bUNSUH_-7gsbYDps6g1QZhQ6uppBCSEx_tk', 'width': 4032}], 'place_id': 'ChIJUyFJ83ymMI4RiMsWJz6nzlU', 'plus_code': {'compound_code': 'CFX6+2C Cali, Valle del Cauca', 'global_code': '67M5CFX6+2C'}, 'price_level': 3, 'rating': 4.4, 'reference': 'ChIJUyFJ83ymMI4RiMsWJz6nzlU', 'types': ['restaurant', 'food', 'point_of_interest', 'establishment'], 'user_ratings_total': 570}, {'business_status': 'OPERATIONAL', 'formatted_address': 'Cl. 4 #26A-04, Miraflores, Cali, Valle del Cauca', 'geometry': {'location': {'lat': 3.4350847, 'lng': -76.54215219999999}, 'viewport': {'northeast': {'lat': 3.436412479892723, 'lng': -76.54079627010728}, 'southwest': {'lat': 3.433712820107278, 'lng': -76.54349592989271}}}, 'icon': 'https://maps.gstatic.com/mapfiles/place_api/icons/v1/png_71/restaurant-71.png', 'icon_background_color': '#FF9E67', 'icon_mask_base_uri': 'https://maps.gstatic.com/mapfiles/place_api/icons/v2/restaurant_pinlet', 'name': 'Anamaya Indian restaurant', 'opening_hours': {'open_now': False}, 'photos': [{'height': 575, 'html_attributions': ['<a href="https://maps.google.com/maps/contrib/103004293878484114561">A Google User</a>'], 'photo_reference': 'AUacShjUtUqdthlw5bmNOIGtaKi6qmxFog-99PoOLzatGUtwADRjtsx5nAT1Pdtk7MCd2E29wZJZFxUA6wIthPQI_ATujOLIumFp344OKiJOIoveRI07mFNInq-kfNlH-y09_wpTLHBaMPHCaT3xqXOg7RCTs5q6krVsN2Yvw27Oqn0wXb4v', 'width': 1024}], 'place_id': 'ChIJFagY6rSnMI4RrKXVij84Q5I', 'plus_code': {'compound_code': 'CFP5+24 Cali, Valle del Cauca', 'global_code': '67M5CFP5+24'}, 'price_level': 2, 'rating': 4.6, 'reference': 'ChIJFagY6rSnMI4RrKXVij84Q5I', 'types': ['cafe', 'restaurant', 'food', 'point_of_interest', 'establishment'], 'user_ratings_total': 347}, {'business_status': 'OPERATIONAL', 'formatted_address': 'Cra. 35 #4-41, El Sindicato, Cali, Valle del Cauca', 'geometry': {'location': {'lat': 3.433947, 'lng': -76.5450949}, 'viewport': {'northeast': {'lat': 3.435246129892722, 'lng': -76.54380657010728}, 'southwest': {'lat': 3.432546470107277, 'lng': -76.54650622989271}}}, 'icon': 'https://maps.gstatic.com/mapfiles/place_api/icons/v1/png_71/restaurant-71.png', 'icon_background_color': '#FF9E67', 'icon_mask_base_uri': 'https://maps.gstatic.com/mapfiles/place_api/icons/v2/restaurant_pinlet', 'name': 'La Cocina', 'opening_hours': {'open_now': False}, 'photos': [{'height': 4000, 'html_attributions': ['<a href="https://maps.google.com/maps/contrib/116957510107905286840">Yovana Oviedo</a>'], 'photo_reference': 'AUacShhG0zD64qGSRJriO9jcP5FrrRSiOBYLe0YZOolsuy3PwydGE9yNTiknCZTMDL2tl0gBbyjtupo-Ee3mLgLRSDxqYC_K2tcl0NaMGwvBy0OZEGlNaD1Eg5f-uL8LX8pr-yVbJfgET5FEV5-cNh1qNJZfP78uXMyaRTjFKkKHyZvyEztI', 'width': 3000}], 'place_id': 'ChIJ_38f1nymMI4RTYX5uZHZDQ4', 'plus_code': {'compound_code': 'CFM3+HX Cali, Valle del Cauca', 'global_code': '67M5CFM3+HX'}, 'price_level': 3, 'rating': 4.5, 'reference': 'ChIJ_38f1nymMI4RTYX5uZHZDQ4', 'types': ['restaurant', 'food', 'point_of_interest', 'establishment'], 'user_ratings_total': 491}, {'business_status': 'OPERATIONAL', 'formatted_address': 'Cra. 105 #15-9, Ciudad Jardín, Cali, Valle del Cauca', 'geometry': {'location': {'lat': 3.3645758, 'lng': -76.5341007}, 'viewport': {'northeast': {'lat': 3.365784729892722, 'lng': -76.53277777010729}, 'southwest': {'lat': 3.363085070107277, 'lng': -76.53547742989272}}}, 'icon': 'https://maps.gstatic.com/mapfiles/place_api/icons/v1/png_71/restaurant-71.png', 'icon_background_color': '#FF9E67', 'icon_mask_base_uri': 'https://maps.gstatic.com/mapfiles/place_api/icons/v2/restaurant_pinlet', 'name': 'Litany Restaurante Arabe', 'opening_hours': {'open_now': False}, 'photos': [{'height': 2250, 'html_attributions': ['<a href="https://maps.google.com/maps/contrib/114125212421267597313">Carlos Andres Ríos-Franco</a>'], 'photo_reference': 'AUacShhyo2npF8y3mSLK_ZjS2AXV--PbPn9Ft1w3rsrHmJ3c3H0wiTT1_oXxKq-IM5xkjrfq4FgqzGPRuimJJjzw3quUXpFnUuKYo-cdSTnCeD3xJrgZk_CKRynPB7fGkM684KDeesAoMb613cFieXCmn0BHfje_KlZoPbewVRtsEP5cGtfS', 'width': 4000}], 'place_id': 'ChIJ5xmEtG2mMI4RrISJtIkrGGo', 'plus_code': {'compound_code': '9F78+R9 Cali, Valle del Cauca', 'global_code': '67M59F78+R9'}, 'price_level': 2, 'rating': 4.6, 'reference': 'ChIJ5xmEtG2mMI4RrISJtIkrGGo', 'types': ['restaurant', 'food', 'point_of_interest', 'establishment'], 'user_ratings_total': 556}, {'business_status': 'OPERATIONAL', 'formatted_address': 'Cl. 4 #10-30, COMUNA 3, Cali, Valle del Cauca', 'geometry': {'location': {'lat': 3.4459335, 'lng': -76.5379399}, 'viewport': {'northeast': {'lat': 3.447284929892722, 'lng': -76.53650877010728}, 'southwest': {'lat': 3.444585270107277, 'lng': -76.53920842989272}}}, 'icon': 'https://maps.gstatic.com/mapfiles/place_api/icons/v1/png_71/restaurant-71.png', 'icon_background_color': '#FF9E67', 'icon_mask_base_uri': 'https://maps.gstatic.com/mapfiles/place_api/icons/v2/restaurant_pinlet', 'name': 'Teatro Mágico Tienda De Sabores', 'opening_hours': {'open_now': False}, 'photos': [{'height': 3456, 'html_attributions': ['<a href="https://maps.google.com/maps/contrib/103871832290694753581">andrea lemos</a>'], 'photo_reference': 'AUacShgPaQ-EDO0iJeEwM28tKDhD9pSyL1Zik9igGVIZn7mFGFLlmnZsFrxAMcCloW7iLgpUnDpLtK0qZtbp5J2A962QdADJEmSL2VRDO9KgCYA-CtkRpEs_FYGpC1IqoCrcoyiUEfTeFc-yRFR52jrTkh0C_Mqhj04ik_jfzqlqwlaQJ66d', 'width': 4608}], 'place_id': 'ChIJrfhFKX2mMI4RawEyfNArm8I', 'plus_code': {'compound_code': 'CFW6+9R Cali, Valle del Cauca', 'global_code': '67M5CFW6+9R'}, 'price_level': 3, 'rating': 4.5, 'reference': 'ChIJrfhFKX2mMI4RawEyfNArm8I', 'types': ['restaurant', 'food', 'point_of_interest', 'establishment'], 'user_ratings_total': 347}, {'business_status': 'OPERATIONAL', 'formatted_address': 'Av. 9 Nte. #17 Norte-11, Santa Monica Residential, Cali, Valle del Cauca', 'geometry': {'location': {'lat': 3.4612448, 'lng': -76.5329538}, 'viewport': {'northeast': {'lat': 3.462562929892723, 'lng': -76.53156142010728}, 'southwest': {'lat': 3.459863270107278, 'lng': -76.53426107989273}}}, 'icon': 'https://maps.gstatic.com/mapfiles/place_api/icons/v1/png_71/restaurant-71.png', 'icon_background_color': '#FF9E67', 'icon_mask_base_uri': 'https://maps.gstatic.com/mapfiles/place_api/icons/v2/restaurant_pinlet', 'name': 'Trattoria Italia da Tommaso', 'opening_hours': {'open_now': False}, 'photos': [{'height': 853, 'html_attributions': ['<a href="https://maps.google.com/maps/contrib/112198494637563097815">A Google User</a>'], 'photo_reference': 'AUacShjuaJltBcDBdGEWIb-4y4fNTHaDzUx8Yi0LexOeKy6CcY25gj8904VERalOcBsLUCO0eipG1pjMjOpVurGKo7CyxfskoJqauBYbxsBJI2PPNxFirsnqvLxVLC074KGGVuUpeauJ4vldMZKmLDxqz52u8WaAsN9p0vkB655H2hGg9bZV', 'width': 1280}], 'place_id': 'ChIJdfuwz3ymMI4R4trZkYCsLck', 'plus_code': {'compound_code': 'FF68+FR Cali, Valle del Cauca', 'global_code': '67M5FF68+FR'}, 'rating': 4.6, 'reference': 'ChIJdfuwz3ymMI4R4trZkYCsLck', 'types': ['restaurant', 'food', 'point_of_interest', 'establishment'], 'user_ratings_total': 855}], 'status': 'OK'}



import concurrent.futures
from dotenv import load_dotenv
import requests
import os

load_dotenv()


def fetch_photo(photo_reference):
    API_KEY=os.environ.get('google_key')
    if photo_reference:
        initial_url = f"https://maps.googleapis.com/maps/api/place/photo?maxwidth=400&photoreference={photo_reference}&key={API_KEY}"
        response = requests.get(initial_url)
        return response.url
    return None
city_list=[{"city": "Puebla City", "city_obj": 670}]
places = []
def process_result(result):
    name = result['name']
    lat = result['geometry']['location']['lat']
    lng = result['geometry']['location']['lng']
    price=result['price_level']
    print(price)
    rating = result['rating']
    # if rating==0:
    #         pass
    place_id = result['place_id']
    photo_reference = result['photos'][0]['photo_reference'] if result.get('photos') else None
    html_attributions = result['photos'][0]['html_attributions'] if result.get('photos') else None
   
    final_url =fetch_photo(photo_reference)
    # image = flickr_api(name=name,latitude=lat,longitude=lng)
    # print(name,place_id)
    place = {
        'name': name,
        'latitude': lat,
        'longitude': lng,
        'review_score': rating,
        'place_id': place_id,
        'photo': final_url,
        'html_attributions': html_attributions,
    }
    places.append(place)


# Process results concurrently
with concurrent.futures.ThreadPoolExecutor() as executor:
    futures = [executor.submit(process_result, result) for result in data['results']]
    concurrent.futures.wait(futures)
    for restaurnt in places:
        name1 = (restaurnt['name'])
        # check_name=Attraction.objects.filter(name=name1).first()
        # if not check_name:   
                            
        latitude1 = restaurnt['latitude']if 'latitude' in restaurnt else ''
        longitude1 = restaurnt['longitude']if 'longitude' in restaurnt else ''
        photos1 = restaurnt['photos']if 'photos' in restaurnt else ''
        review_score1 = restaurnt['review_score']if 'review_score' in restaurnt else ''
        city_obj=restaurnt['city_obj']if 'city_obj' in restaurnt else ''
        # city_obj=City.objects.filter(id=city_obj).first()
    print (places)
for city_info in city_list:
    city = city_info['city'] 
    city_obj = city_info['city_obj']
    